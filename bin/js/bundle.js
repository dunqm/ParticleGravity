var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _Gravity = require("./script/Gravity");

var _Gravity2 = _interopRequireDefault(_Gravity);

var _Particle = require("./script/Particle/Particle");

var _Particle2 = _interopRequireDefault(_Particle);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("script/Gravity.js", _Gravity2.default);
            reg("script/Particle/Particle.js", _Particle2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 640;
GameConfig.height = 1024;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "GravityGame.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = true;
GameConfig.physicsDebug = true;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/Gravity":3,"./script/Particle/Particle":4}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _layaMaxUI = require("./ui/layaMaxUI");

var _layaMaxUI2 = _interopRequireDefault(_layaMaxUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./ui/layaMaxUI":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Gravity = function (_Laya$Script) {
    _inherits(Gravity, _Laya$Script);

    /** @prop {name:Particle, tips:"粒子", type:Prefab}  */
    function Gravity() {
        _classCallCheck(this, Gravity);

        return _possibleConstructorReturn(this, (Gravity.__proto__ || Object.getPrototypeOf(Gravity)).call(this));
    }

    _createClass(Gravity, [{
        key: "onEnable",
        value: function onEnable() {}

        /**
         * 鼠标点击创建粒子
         */

    }, {
        key: "onClick",
        value: function onClick() {
            var particle = Laya.Pool.getItemByCreateFun("Particle", this.Particle.create, this.Particle);
            particle.pos(this.owner.mouseX, this.owner.mouseY);
            this.owner.addChild(particle);
        }
    }]);

    return Gravity;
}(Laya.Script);

exports.default = Gravity;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Particle = function (_Laya$Script) {
    _inherits(Particle, _Laya$Script);

    /**
     * BUG：物体的坐标并不在物体中心，而物体受力点在物体中心(2019-4-4 4:38)   已解决by:QM
     * 性能：当物体超过一定数量时程序性能严重下降(2019-4-5 23:16)
     */
    function Particle() {
        _classCallCheck(this, Particle);

        var _this = _possibleConstructorReturn(this, (Particle.__proto__ || Object.getPrototypeOf(Particle)).call(this));

        _this._color = "#9400D3";
        return _this;
    }

    _createClass(Particle, [{
        key: "onEnable",
        value: function onEnable() {
            this._rig = this.owner.getComponent(Laya.RigidBody);
            this.owner.graphics.drawCircle(8, 8, 8, this._color);
            var glowFilter = new Laya.GlowFilter(this._color, 10, 0, 0);
            this.owner.filters = [glowFilter];

            //this._rig.setVelocity({x:10,y:10});
            var Me = this;
            this.owner._test = function () {
                Me.vstest();
            };
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            //分别与父容器下的所有子元素计算引力
            var _Particle = this.owner._parent._children;
            var ForceAll = { x: 0, y: 0 };
            for (var i = 0, len = _Particle.length; i < len; i++) {
                if (_Particle[i].name != "Particle") continue;
                //求出两物体质心点坐标
                var x1 = this._rig.getWorldCenter().x,
                    y1 = this._rig.getWorldCenter().y,
                    x2 = _Particle[i]._components[0].getWorldCenter().x,
                    y2 = _Particle[i]._components[0].getWorldCenter().y;
                var _x = x2 - x1;
                var _y = y2 - y1;
                //求出两物体质量
                var m1 = this._rig.getMass();
                var m2 = _Particle[i]._components[0].getMass();
                //求出引力
                var Force = this.Gravity(_x, _y, m1, m2);
                if (Force != null) {
                    ForceAll.x += Force.x;
                    ForceAll.y += Force.y;
                }
            }
            this._rig.applyForceToCenter(ForceAll);
            //this._rig.linearVelocity = {x : this._rig.linearVelocity.x -1 , y: this._rig.linearVelocity.y -1};
        }

        /**
         * 测试：(此测试只针对于两物体，超过2个时程序会报错)
         * 1.模拟相对于静止物体的匀速圆周运动(半径为两物体中点到圆心距离)
         * 2.模拟二体圆周运动(半径为两物体中点到圆心距离)
         */

    }, {
        key: "vstest",
        value: function vstest() {
            var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;

            var _Particle = this.owner._parent._children;
            for (var i = 0, len = _Particle.length; i < len; i++) {
                if (_Particle[i].name != "Particle") continue;
                var x1 = this._rig.getWorldCenter().x,
                    y1 = this._rig.getWorldCenter().y,
                    x2 = _Particle[i]._components[0].getWorldCenter().x,
                    y2 = _Particle[i]._components[0].getWorldCenter().y;
                var _x = x2 - x1;
                var _y = y2 - y1;
                var m2 = _Particle[i]._components[0].getMass();
                if (type == 1) {
                    var v = this.UniformCircularMotion(_x, _y, m2);
                } else if (type == 2) {
                    //模拟二体圆周运动，同样用到匀速圆周运动性质
                    var v = this.UniformCircularMotion(_x * 2, _y * 2, m2);
                }
                if (v != null) this._rig.setVelocity(v);
            }
        }

        /**
         * 根据两点坐标差和质量，得出匀速圆周运动所需的初速度和切线方向
         * @param {number} x 
         * @param {number} y 
         * @param {number} m 
         * @returns {any} 输出速度的二维向量坐标，例如{x:10, y:10};不合法输出null
         * @author QM
         */

    }, {
        key: "UniformCircularMotion",
        value: function UniformCircularMotion(x, y, m) {
            //万有引力常数
            var G = 1e2;
            //单位换算
            x = x / Laya.Physics.PIXEL_RATIO;
            y = y / Laya.Physics.PIXEL_RATIO;
            //此处R为两点距离r的平方
            var R = x * x + y * y;
            if (R > 0) {
                //根据匀速圆周运动性质求出初速度
                var v = Math.sqrt(G * m / Math.sqrt(R));
                if (x == 0) {
                    return { x: (y > 0 ? -1 : 1) * v, y: 0 };
                } else if (y == 0) {
                    return { x: 0, y: (x > 0 ? -1 : 1) * v };
                } else {
                    //根据三角形性质求出切线方向
                    var cv = { x: y * y / x, y: -y };
                    var k = v / Math.sqrt(cv.x * cv.x + cv.y * cv.y);
                    return { x: cv.x * k, y: cv.y * k };
                }
            }
            return null;
        }

        /**
         * 根据两点坐标差值以及质量，计算出引力
         * @param {number} x x坐标差值
         * @param {number} y y坐标差值
         * @param {number} m1 质量
         * @param {number} m2 质量
         * @returns {any} 输出力的二维向量坐标，例如{x:10, y:10};不合法输出null
         * @author QM
         */

    }, {
        key: "Gravity",
        value: function Gravity(x, y, m1, m2) {
            //万有引力常数
            var G = 1e2;
            //单位换算
            x = x / Laya.Physics.PIXEL_RATIO;
            y = y / Laya.Physics.PIXEL_RATIO;
            //此处R为两点距离r的平方
            var R = x * x + y * y;
            if (R > 0) {
                //根据万有引力公式得出引力F
                var F = G * m1 * m2 / R;
                var k = F / Math.sqrt(R);
                return { x: x * k, y: y * k };
            }
            return null;
        }
    }]);

    return Particle;
}(Laya.Script);

exports.default = Particle;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var CLASS$ = Laya.class;
var STATICATTR$ = Laya.static;
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
if (!window.ui) window.ui = {};
exports.default = ui;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1Byb2dyYW0gRmlsZXMvTGF5YUFpcklERV9iZXRhL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLmpzIiwic3JjL01haW4uanMiLCJzcmMvc2NyaXB0L0dyYXZpdHkuanMiLCJzcmMvc2NyaXB0L1BhcnRpY2xlL1BhcnRpY2xlLmpzIiwic3JjL3VpL2xheWFNYXhVSS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSxtQkFBSixFQUF3QixpQkFBeEI7QUFDQSxnQkFBSSw2QkFBSixFQUFrQyxrQkFBbEM7QUFDRzs7Ozs7O2tCQU5nQixVOztBQVFyQixXQUFXLEtBQVgsR0FBbUIsR0FBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsSUFBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsWUFBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsTUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsS0FBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsTUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsbUJBQXhCO0FBQ0EsV0FBVyxTQUFYLEdBQXVCLEVBQXZCO0FBQ0EsV0FBVyxLQUFYLEdBQW1CLEtBQW5CO0FBQ0EsV0FBVyxJQUFYLEdBQWtCLElBQWxCO0FBQ0EsV0FBVyxZQUFYLEdBQTBCLElBQTFCO0FBQ0EsV0FBVyxpQkFBWCxHQUErQixJQUEvQjs7QUFFQSxXQUFXLElBQVg7Ozs7Ozs7QUN6QkM7Ozs7QUFDRDs7Ozs7Ozs7SUFDTSxJO0FBQ0wsaUJBQWM7QUFBQTs7QUFDYjtBQUNBLE1BQUksT0FB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QVA7QUFDSDs7QUFHRDs7Ozs7Ozs7Ozs7O2dDQVNTLEMsRUFBRyxDLEVBQUcsRSxFQUFJLEUsRUFBRztBQUNsQjtBQUNBLGdCQUFJLElBQUksR0FBUjtBQUNBO0FBQ0EsZ0JBQUksSUFBSSxLQUFLLE9BQUwsQ0FBYSxXQUFyQjtBQUNBLGdCQUFJLElBQUksS0FBSyxPQUFMLENBQWEsV0FBckI7QUFDQTtBQUNBLGdCQUFJLElBQUssSUFBSSxDQUFKLEdBQVEsSUFBSSxDQUFyQjtBQUNBLGdCQUFHLElBQUksQ0FBUCxFQUFTO0FBQ0w7QUFDQSxvQkFBSSxJQUFJLElBQUksRUFBSixHQUFTLEVBQVQsR0FBYyxDQUF0QjtBQUNBLG9CQUFJLElBQUksSUFBSSxLQUFLLElBQUwsQ0FBVSxDQUFWLENBQVo7QUFDQSx1QkFBTyxFQUFDLEdBQUksSUFBSSxDQUFULEVBQVksR0FBSSxJQUFJLENBQXBCLEVBQVA7QUFDSDtBQUNELG1CQUFPLElBQVA7QUFDSDs7OztFQXpJaUMsS0FBSyxNOztrQkFBdEIsUTs7Ozs7Ozs7QUNBckI7QUFDQSxJQUFJLFNBQU8sS0FBSyxLQUFoQjtBQUNBLElBQUksY0FBWSxLQUFLLE1BQXJCO0FBQ0EsSUFBSSxPQUFLLEtBQUssRUFBTCxDQUFRLElBQWpCO0FBQ0EsSUFBSSxTQUFPLEtBQUssRUFBTCxDQUFRLE1BQW5CO0FBQ0EsSUFBSSxRQUFNLEtBQUssS0FBZjtBQUNBLElBQUcsQ0FBQyxPQUFPLEVBQVgsRUFBZSxPQUFPLEVBQVAsR0FBVSxFQUFWO1FBQ0QsTyxHQUFOLEUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHcmF2aXR5IGZyb20gXCIuL3NjcmlwdC9HcmF2aXR5XCJcbmltcG9ydCBQYXJ0aWNsZSBmcm9tIFwiLi9zY3JpcHQvUGFydGljbGUvUGFydGljbGVcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZyB7XHJcbiAgICBzdGF0aWMgaW5pdCgpIHtcclxuICAgICAgICAvL+azqOWGjFNjcmlwdOaIluiAhVJ1bnRpbWXlvJXnlKhcclxuICAgICAgICBsZXQgcmVnID0gTGF5YS5DbGFzc1V0aWxzLnJlZ0NsYXNzO1xyXG5cdFx0cmVnKFwic2NyaXB0L0dyYXZpdHkuanNcIixHcmF2aXR5KTtcblx0XHRyZWcoXCJzY3JpcHQvUGFydGljbGUvUGFydGljbGUuanNcIixQYXJ0aWNsZSk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy53aWR0aCA9IDY0MDtcclxuR2FtZUNvbmZpZy5oZWlnaHQgPSAxMDI0O1xyXG5HYW1lQ29uZmlnLnNjYWxlTW9kZSA9XCJmaXhlZHdpZHRoXCI7XHJcbkdhbWVDb25maWcuc2NyZWVuTW9kZSA9IFwibm9uZVwiO1xyXG5HYW1lQ29uZmlnLmFsaWduViA9IFwidG9wXCI7XHJcbkdhbWVDb25maWcuYWxpZ25IID0gXCJsZWZ0XCI7XHJcbkdhbWVDb25maWcuc3RhcnRTY2VuZSA9IFwiR3Jhdml0eUdhbWUuc2NlbmVcIjtcclxuR2FtZUNvbmZpZy5zY2VuZVJvb3QgPSBcIlwiO1xyXG5HYW1lQ29uZmlnLmRlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuc3RhdCA9IHRydWU7XHJcbkdhbWVDb25maWcucGh5c2ljc0RlYnVnID0gdHJ1ZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwi77u/aW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgdWkgZnJvbSBcIi4vdWkvbGF5YU1heFVJXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnblYgPSBHYW1lQ29uZmlnLmFsaWduVjtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25IID0gR2FtZUNvbmZpZy5hbGlnbkg7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCkge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3Jhdml0eSBleHRlbmRzIExheWEuU2NyaXB0e1xyXG4gICAgLyoqIEBwcm9wIHtuYW1lOlBhcnRpY2xlLCB0aXBzOlwi57KS5a2QXCIsIHR5cGU6UHJlZmFifSAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCl7c3VwZXIoKTt9XHJcblxyXG4gICAgb25FbmFibGUoKXtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpvKDmoIfngrnlh7vliJvlu7rnspLlrZBcclxuICAgICAqL1xyXG4gICAgb25DbGljaygpe1xyXG4gICAgICAgIGxldCBwYXJ0aWNsZSA9IExheWEuUG9vbC5nZXRJdGVtQnlDcmVhdGVGdW4oXCJQYXJ0aWNsZVwiLCB0aGlzLlBhcnRpY2xlLmNyZWF0ZSwgdGhpcy5QYXJ0aWNsZSk7XHJcbiAgICAgICAgcGFydGljbGUucG9zKHRoaXMub3duZXIubW91c2VYLCB0aGlzLm93bmVyLm1vdXNlWSk7XHJcbiAgICAgICAgdGhpcy5vd25lci5hZGRDaGlsZChwYXJ0aWNsZSk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGUgZXh0ZW5kcyBMYXlhLlNjcmlwdHtcclxuICAgIC8qKlxyXG4gICAgICogQlVH77ya54mp5L2T55qE5Z2Q5qCH5bm25LiN5Zyo54mp5L2T5Lit5b+D77yM6ICM54mp5L2T5Y+X5Yqb54K55Zyo54mp5L2T5Lit5b+DKDIwMTktNC00IDQ6MzgpICAg5bey6Kej5YazYnk6UU1cclxuICAgICAqIOaAp+iDve+8muW9k+eJqeS9k+i2hei/h+S4gOWumuaVsOmHj+aXtueoi+W6j+aAp+iDveS4pemHjeS4i+mZjSgyMDE5LTQtNSAyMzoxNilcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2NvbG9yID0gXCIjOTQwMEQzXCI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9uRW5hYmxlKCl7XHJcbiAgICAgICAgdGhpcy5fcmlnID0gdGhpcy5vd25lci5nZXRDb21wb25lbnQoTGF5YS5SaWdpZEJvZHkpO1xyXG4gICAgICAgIHRoaXMub3duZXIuZ3JhcGhpY3MuZHJhd0NpcmNsZSg4LDgsOCx0aGlzLl9jb2xvcik7XHJcbiAgICAgICAgdmFyIGdsb3dGaWx0ZXIgPSBuZXcgTGF5YS5HbG93RmlsdGVyKHRoaXMuX2NvbG9yLCAxMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy5vd25lci5maWx0ZXJzID0gW2dsb3dGaWx0ZXJdO1xyXG5cclxuICAgICAgICAvL3RoaXMuX3JpZy5zZXRWZWxvY2l0eSh7eDoxMCx5OjEwfSk7XHJcbiAgICAgICAgdmFyIE1lID0gdGhpcztcclxuICAgICAgICB0aGlzLm93bmVyLl90ZXN0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgTWUudnN0ZXN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCl7XHJcbiAgICAgICAgLy/liIbliKvkuI7niLblrrnlmajkuIvnmoTmiYDmnInlrZDlhYPntKDorqHnrpflvJXliptcclxuICAgICAgICB2YXIgX1BhcnRpY2xlID0gdGhpcy5vd25lci5fcGFyZW50Ll9jaGlsZHJlbjtcclxuICAgICAgICB2YXIgRm9yY2VBbGwgPSB7eCA6IDAsIHk6IDB9O1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDAsbGVuID0gX1BhcnRpY2xlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcclxuICAgICAgICAgICAgaWYoX1BhcnRpY2xlW2ldLm5hbWUgIT0gXCJQYXJ0aWNsZVwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgLy/msYLlh7rkuKTniankvZPotKjlv4PngrnlnZDmoIdcclxuICAgICAgICAgICAgdmFyIHgxID0gdGhpcy5fcmlnLmdldFdvcmxkQ2VudGVyKCkueCxcclxuICAgICAgICAgICAgICAgIHkxID0gdGhpcy5fcmlnLmdldFdvcmxkQ2VudGVyKCkueSxcclxuICAgICAgICAgICAgICAgIHgyID0gX1BhcnRpY2xlW2ldLl9jb21wb25lbnRzWzBdLmdldFdvcmxkQ2VudGVyKCkueCxcclxuICAgICAgICAgICAgICAgIHkyID0gX1BhcnRpY2xlW2ldLl9jb21wb25lbnRzWzBdLmdldFdvcmxkQ2VudGVyKCkueTtcclxuICAgICAgICAgICAgdmFyIF94ID0geDIgLSB4MTtcclxuICAgICAgICAgICAgdmFyIF95ID0geTIgLSB5MTtcclxuICAgICAgICAgICAgLy/msYLlh7rkuKTniankvZPotKjph49cclxuICAgICAgICAgICAgdmFyIG0xID0gdGhpcy5fcmlnLmdldE1hc3MoKTtcclxuICAgICAgICAgICAgdmFyIG0yID0gX1BhcnRpY2xlW2ldLl9jb21wb25lbnRzWzBdLmdldE1hc3MoKTtcclxuICAgICAgICAgICAgLy/msYLlh7rlvJXliptcclxuICAgICAgICAgICAgdmFyIEZvcmNlID0gdGhpcy5HcmF2aXR5KCBfeCwgX3ksIG0xLCBtMiApO1xyXG4gICAgICAgICAgICBpZihGb3JjZSAhPSBudWxsKXtcclxuICAgICAgICAgICAgICAgIEZvcmNlQWxsLnggKz0gRm9yY2UueDtcclxuICAgICAgICAgICAgICAgIEZvcmNlQWxsLnkgKz0gRm9yY2UueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yaWcuYXBwbHlGb3JjZVRvQ2VudGVyKEZvcmNlQWxsKTtcclxuICAgICAgICAvL3RoaXMuX3JpZy5saW5lYXJWZWxvY2l0eSA9IHt4IDogdGhpcy5fcmlnLmxpbmVhclZlbG9jaXR5LnggLTEgLCB5OiB0aGlzLl9yaWcubGluZWFyVmVsb2NpdHkueSAtMX07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rWL6K+V77yaKOatpOa1i+ivleWPqumSiOWvueS6juS4pOeJqeS9k++8jOi2hei/hzLkuKrml7bnqIvluo/kvJrmiqXplJkpXHJcbiAgICAgKiAxLuaooeaLn+ebuOWvueS6jumdmeatoueJqeS9k+eahOWMgOmAn+WchuWRqOi/kOWKqCjljYrlvoTkuLrkuKTniankvZPkuK3ngrnliLDlnIblv4Pot53nprspXHJcbiAgICAgKiAyLuaooeaLn+S6jOS9k+WchuWRqOi/kOWKqCjljYrlvoTkuLrkuKTniankvZPkuK3ngrnliLDlnIblv4Pot53nprspXHJcbiAgICAgKi9cclxuICAgIHZzdGVzdCh0eXBlID0gMSl7XHJcbiAgICAgICAgdmFyIF9QYXJ0aWNsZSA9IHRoaXMub3duZXIuX3BhcmVudC5fY2hpbGRyZW47XHJcbiAgICAgICAgZm9yKHZhciBpID0gMCxsZW4gPSBfUGFydGljbGUubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xyXG4gICAgICAgICAgICBpZihfUGFydGljbGVbaV0ubmFtZSAhPSBcIlBhcnRpY2xlXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgeDEgPSB0aGlzLl9yaWcuZ2V0V29ybGRDZW50ZXIoKS54LFxyXG4gICAgICAgICAgICAgICAgeTEgPSB0aGlzLl9yaWcuZ2V0V29ybGRDZW50ZXIoKS55LFxyXG4gICAgICAgICAgICAgICAgeDIgPSBfUGFydGljbGVbaV0uX2NvbXBvbmVudHNbMF0uZ2V0V29ybGRDZW50ZXIoKS54LFxyXG4gICAgICAgICAgICAgICAgeTIgPSBfUGFydGljbGVbaV0uX2NvbXBvbmVudHNbMF0uZ2V0V29ybGRDZW50ZXIoKS55O1xyXG4gICAgICAgICAgICB2YXIgX3ggPSB4MiAtIHgxO1xyXG4gICAgICAgICAgICB2YXIgX3kgPSB5MiAtIHkxO1xyXG4gICAgICAgICAgICB2YXIgbTIgPSBfUGFydGljbGVbaV0uX2NvbXBvbmVudHNbMF0uZ2V0TWFzcygpO1xyXG4gICAgICAgICAgICBpZih0eXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHYgPSB0aGlzLlVuaWZvcm1DaXJjdWxhck1vdGlvbihfeCwgX3ksIG0yKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PSAyKXtcclxuICAgICAgICAgICAgICAgIC8v5qih5ouf5LqM5L2T5ZyG5ZGo6L+Q5Yqo77yM5ZCM5qC355So5Yiw5YyA6YCf5ZyG5ZGo6L+Q5Yqo5oCn6LSoXHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IHRoaXMuVW5pZm9ybUNpcmN1bGFyTW90aW9uKF94ICogMiwgX3kgKiAyLCBtMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodiAhPSBudWxsKSB0aGlzLl9yaWcuc2V0VmVsb2NpdHkodik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOagueaNruS4pOeCueWdkOagh+W3ruWSjOi0qOmHj++8jOW+l+WHuuWMgOmAn+WchuWRqOi/kOWKqOaJgOmcgOeahOWInemAn+W6puWSjOWIh+e6v+aWueWQkVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtIFxyXG4gICAgICogQHJldHVybnMge2FueX0g6L6T5Ye66YCf5bqm55qE5LqM57u05ZCR6YeP5Z2Q5qCH77yM5L6L5aaCe3g6MTAsIHk6MTB9O+S4jeWQiOazlei+k+WHum51bGxcclxuICAgICAqIEBhdXRob3IgUU1cclxuICAgICAqL1xyXG4gICAgVW5pZm9ybUNpcmN1bGFyTW90aW9uKHgsIHksIG0pe1xyXG4gICAgICAgIC8v5LiH5pyJ5byV5Yqb5bi45pWwXHJcbiAgICAgICAgdmFyIEcgPSAxZTI7XHJcbiAgICAgICAgLy/ljZXkvY3mjaLnrpdcclxuICAgICAgICB4ID0geCAvIExheWEuUGh5c2ljcy5QSVhFTF9SQVRJTztcclxuICAgICAgICB5ID0geSAvIExheWEuUGh5c2ljcy5QSVhFTF9SQVRJTztcclxuICAgICAgICAvL+atpOWkhFLkuLrkuKTngrnot53nprty55qE5bmz5pa5XHJcbiAgICAgICAgdmFyIFIgPSAoeCAqIHggKyB5ICogeSk7XHJcbiAgICAgICAgaWYoUj4wKXtcclxuICAgICAgICAgICAgLy/moLnmja7ljIDpgJ/lnIblkajov5DliqjmgKfotKjmsYLlh7rliJ3pgJ/luqZcclxuICAgICAgICAgICAgdmFyIHYgPSBNYXRoLnNxcnQoRyptL01hdGguc3FydChSKSk7XHJcbiAgICAgICAgICAgIGlmKCB4ID09IDApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt4IDogKHkgPiAwPyAtMSA6IDEpICogdiwgeSA6IDB9O1xyXG4gICAgICAgICAgICB9ZWxzZSBpZih5ID09IDApe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt4IDogMCwgeSA6ICh4ID4gMD8gLTEgOiAxKSAqIHZ9O1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8v5qC55o2u5LiJ6KeS5b2i5oCn6LSo5rGC5Ye65YiH57q/5pa55ZCRXHJcbiAgICAgICAgICAgICAgICB2YXIgY3YgPSB7eDogKHkgKiB5IC8geCksIHkgOiAteSB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSB2IC8gTWF0aC5zcXJ0KGN2LnggKiBjdi54ICsgY3YueSAqIGN2LnkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHt4IDogY3YueCAqIGssIHkgOiBjdi55ICoga307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5Lik54K55Z2Q5qCH5beu5YC85Lul5Y+K6LSo6YeP77yM6K6h566X5Ye65byV5YqbXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCB45Z2Q5qCH5beu5YC8XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSB55Z2Q5qCH5beu5YC8XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbTEg6LSo6YePXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbTIg6LSo6YePXHJcbiAgICAgKiBAcmV0dXJucyB7YW55fSDovpPlh7rlipvnmoTkuoznu7TlkJHph4/lnZDmoIfvvIzkvovlpoJ7eDoxMCwgeToxMH075LiN5ZCI5rOV6L6T5Ye6bnVsbFxyXG4gICAgICogQGF1dGhvciBRTVxyXG4gICAgICovXHJcbiAgICBHcmF2aXR5KCB4LCB5LCBtMSwgbTIpe1xyXG4gICAgICAgIC8v5LiH5pyJ5byV5Yqb5bi45pWwXHJcbiAgICAgICAgdmFyIEcgPSAxZTI7XHJcbiAgICAgICAgLy/ljZXkvY3mjaLnrpdcclxuICAgICAgICB4ID0geCAvIExheWEuUGh5c2ljcy5QSVhFTF9SQVRJTztcclxuICAgICAgICB5ID0geSAvIExheWEuUGh5c2ljcy5QSVhFTF9SQVRJTztcclxuICAgICAgICAvL+atpOWkhFLkuLrkuKTngrnot53nprty55qE5bmz5pa5XHJcbiAgICAgICAgdmFyIFIgPSAoeCAqIHggKyB5ICogeSkgO1xyXG4gICAgICAgIGlmKFIgPiAwKXtcclxuICAgICAgICAgICAgLy/moLnmja7kuIfmnInlvJXlipvlhazlvI/lvpflh7rlvJXliptGXHJcbiAgICAgICAgICAgIHZhciBGID0gRyAqIG0xICogbTIgLyBSO1xyXG4gICAgICAgICAgICB2YXIgayA9IEYgLyBNYXRoLnNxcnQoUik7XHJcbiAgICAgICAgICAgIHJldHVybiB7eCA6IHggKiBrLCB5IDogeSAqIGt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG52YXIgQ0xBU1MkPUxheWEuY2xhc3M7XHJcbnZhciBTVEFUSUNBVFRSJD1MYXlhLnN0YXRpYztcbnZhciBWaWV3PWxheWEudWkuVmlldztcclxudmFyIERpYWxvZz1sYXlhLnVpLkRpYWxvZztcclxudmFyIFNjZW5lPUxheWEuU2NlbmU7XG5pZighd2luZG93LnVpKSB3aW5kb3cudWk9e307XG5leHBvcnQge3VpIGFzIGRlZmF1bHR9OyJdfQ==
